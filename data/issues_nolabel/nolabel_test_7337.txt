Merge in some performance changes to r1.0

git cherry-pick f49cca9
git cherry-pick 66b5684
git cherry-pick f0a1af4
git cherry-pick 2b589dc
git cherry-pick f49721a
git cherry-pick 9b7c47c
git cherry-pick 4464232
git cherry-pick 5be95cb
git cherry-pick 27ffb49
git cherry-pick e9602d2
git cherry-pick bf67d0a
git cherry-pick 7725c87
git cherry-pick e212770