Refactored CMake rules to reduce redundancy.

A step towards concentrating the platform- and compiler-specific code in one place.