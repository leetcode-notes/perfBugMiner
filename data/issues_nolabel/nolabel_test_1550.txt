Upstream latest changes from internal

(All changes coming from internal Googlers).