Use standard types and add missing returns to fix compitable with MSVC

No description provided.