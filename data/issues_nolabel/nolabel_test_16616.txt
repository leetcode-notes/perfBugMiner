[WIP] More generic configuration

#13851
@drpngx