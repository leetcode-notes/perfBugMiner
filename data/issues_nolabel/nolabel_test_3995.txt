extend tf.select to broadcast a scalar condition #3945

This is WIP. The test fails on my machine for the GPU version. Comments are welcome.