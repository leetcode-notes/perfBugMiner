Update retrain.py to be compatible with Python 3

It's PROBABLY backwards compatible with Python 2 but I haven't fully tested it
Fixes #1274