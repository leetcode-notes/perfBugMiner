num_epochs does not work in modified cifar10

I am running cifar10 examples and have made some changes. I would like to evaluate every example only once, while the original example can only do mass evaluation. My question are described here. And was suggested by changing function 'tf.train.string_input_producer'.
But it failed and I also found a similar question but with no final solution given, @mrry .
And this problem can also solve other problems including this one here.
Thank you in advance.