Restore a working CMake build on Linux

Updates CMake build files as follows:

Adds giflib dependency.
Adds support for the new C++ codegen API.
Adds support for the tensorflow/core/debug libraries.