Problems on using static library of tensorflow

I working on a big c++ project, which is big and doesn't use bazel as its build tool. So I am trying to build a static library on tensorflow. By following the tutorial at tensorflow/contrib/makefile , I successfully build libtensorflow-core.a. But when I try to include "tensorflow/core/public/session.h" in my main.cc and run "gcc -c main.cc". It shows an error: 'tensorflow/core/framework/graph.pb.h' file not found. That file is automatically generated by bazel. However I couldn't use bazel.
Does anyone know about this problem? Thanks a lot.