Support GIF image decode ops by giflib library

Refactor the code from the former PR #2578, to use giflib instead of FreeImage.
@martinwicke Please review this. Thanks