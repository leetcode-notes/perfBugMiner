Configure should work offline

Currently, configure set some environment variables and invoke bazel fetch. When the fetch fails, due to network issue for example, the environment variables are also lost. I tried to source ./configure, but the shell died instantly. The only way I found to workaround this is to replace bazel fetch with bash in configure, then manually run bazel fetch a few times until it succeed. IMHO, configure should do the configuration separately instead of as part of bazel fetch.