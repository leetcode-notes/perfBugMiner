[wip] 4d image ops

Continuation of #3566 - I decided to change to master branch, since I needed some stuff that wasn't in r0.9.
I've extended hue, saturation, and the flip ops now. Comments or suggestions are welcome.
I'll continue working on the other ops here and there, when I have the time, and after that I'll write some tests.
The latest commit might look a bit strange, because of a merge with the latest upstream master.