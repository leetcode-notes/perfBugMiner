replace prune subgraph algorithm with auto deduction for ranged-for

No description provided.