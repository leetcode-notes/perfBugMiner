Broken initialization when graph has data dependencies.

As per conversation at OpenAI (cc @alextp @yaroslavvb).
Here's an example of broken variable initialization and the super-slow fix:
https://gist.github.com/nivwusquorum/551b502e1cf36a09c9c05385ccea5eb5
Let me know if you need more details